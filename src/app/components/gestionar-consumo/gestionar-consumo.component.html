<div style="width: 600px; max-width: 100%; margin: auto;">
    <mat-form-field class="example-full-width">
        <mat-label>Seleccione la mesa:</mat-label>
        <mat-select [(ngModel)]="idMesa" (selectionChange)="verificarMesa()" [disabled]="!puedoSeleccionarMesa">
            <mat-option *ngFor="let mesa of listaMesas" [value]="mesa.idMesa">
                {{ mesa.nombreMesa }}, restaurante {{mesa.idRestaurante}}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <div *ngIf="mesaSeleccionada">
        <mat-form-field class="example-full-width">
            <mat-label>Número de cédula del cliente</mat-label>
            <input matInput [(ngModel)]="nroCedula" (change)="getCliente()">
        </mat-form-field>
        <mat-form-field class="example-full-width">
            <input matInput [(ngModel)]="nombresApellidos" [disabled]=true (change)="checkFormCompletion()">
        </mat-form-field>
        <mat-form-field class="example-full-width" *ngIf="!clienteEncontrado">
            <mat-label>Ingrese nombre del cliente</mat-label>
            <input matInput [(ngModel)]="nombres" [disabled]="clienteEncontrado" (change)="checkFormCompletion()">
        </mat-form-field>
        <mat-form-field class="example-full-width" *ngIf="!clienteEncontrado">
            <mat-label>Ingrese apellido del cliente</mat-label>
            <input matInput [(ngModel)]="apellidos" [disabled]="clienteEncontrado" (change)="checkFormCompletion()">
        </mat-form-field>
        <h4>
            Detalles de consumo
        </h4>
        <div *ngIf="detallesDeConsumo.length > 0">
            <mat-table [dataSource]="dataSourceDetallesDeConsumo">
                <ng-container matColumnDef="idProducto">
                <th mat-header-cell *matHeaderCellDef>Producto</th>
                <td mat-cell *matCellDef="let d" style="width: 200px;">{{d.nombreProducto}}</td>
                </ng-container>
                <ng-container matColumnDef="cantidad">
                <th mat-header-cell *matHeaderCellDef>Cantidad</th>
                <td mat-cell *matCellDef="let d" style="width: 150px;">{{d.cantidad}}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="['idProducto', 'cantidad']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['idProducto', 'cantidad']"></tr>
            </mat-table>
            Total consumido {{total}} Gs.
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <mat-form-field>
                <mat-select [(ngModel)]="idProducto" (selectionChange)="checkFormCompletion()">
                    <mat-option *ngFor="let producto of productos" [value]="producto.idProducto">
                        {{ producto.nombreProducto }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field>
                <input matInput type="number" placeholder="Cantidad" [(ngModel)]="cantidad">
            </mat-form-field>          
            <button mat-raised-button color="primary" (click)="agregarDetalle()">Agregar</button>
        </div>
        <div *ngIf="detallesDeConsumo.length > 0">
            <button mat-raised-button color="warn" (click)="cerrarMesa()">Cerrar Mesa</button>
        </div>
    </div>
</div>





